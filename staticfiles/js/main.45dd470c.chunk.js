(window.webpackJsonpfront=window.webpackJsonpfront||[]).push([[0],{43:function(e,t,a){e.exports=a(74)},48:function(e,t,a){},71:function(e,t,a){},74:function(e,t,a){"use strict";a.r(t);var r={};a.r(r),a.d(r,"traer_uno",function(){return x}),a.d(r,"agregar_respuesta",function(){return k}),a.d(r,"agregar_respuesta_uno",function(){return C}),a.d(r,"quitar_respuesta",function(){return w}),a.d(r,"agregar_respuesta_texto",function(){return S}),a.d(r,"guardar_datos",function(){return D}),a.d(r,"cambiaGenero",function(){return R}),a.d(r,"siguiente",function(){return A});var n=a(0),s=a.n(n),o=a(22),c=a.n(o),u=(a(48),a(8)),i=a.n(u),p=a(18),l=a(16),m=a(9),d=a(10),h=a(14),g=a(11),f=a(13),E=a(12),v=a(21),b=a.n(v),j="TRAER_UNO_ENCUESTA",y="GUARDADO_ENCUESTA",O="SIGUIENTE_ENCUESTA";function _(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,r)}return a}function N(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?_(a,!0).forEach(function(t){Object(l.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):_(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var x=function(e){return function(){var t=Object(p.a)(i.a.mark(function t(a){var r,n,s,o;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,b.a.get("https://www.mktestudios.com/api/v1/encuestas/".concat(e,"/"));case 3:r=t.sent,n=r.data,s=n.preguntas.map(function(e){return N({},e,{respuestas:[],respuesta_texto:""})}),o=N({},n,{preguntas:s}),a({type:j,payload:o}),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),console.log(t.t0);case 13:case"end":return t.stop()}},t,null,[[0,10]])}));return function(e){return t.apply(this,arguments)}}()},k=function(e,t){return function(a,r){var n=r().encuestaReducers.encuesta,s=n.preguntas;s[e]=N({},s[e],{respuestas:s[e].respuestas.concat(t)});var o=N({},n,{preguntas:s});a({type:j,payload:o})}},C=function(e,t){return function(a,r){var n=r().encuestaReducers.encuesta,s=n.preguntas;s[e]=N({},s[e],{respuestas:[t]});var o=N({},n,{preguntas:s});a({type:j,payload:o})}},w=function(e,t){return function(a,r){var n=r().encuestaReducers.encuesta,s=n.preguntas,o=s[e].respuestas,c=o.findIndex(function(e){return e.id===t.id});o.splice(c,1),s[e]=N({},s[e],{respuestas:o});var u=N({},n,{preguntas:s});a({type:j,payload:u})}},S=function(e,t){return function(a,r){var n=r().encuestaReducers.encuesta,s=n.preguntas;s[e]=N({},s[e],{respuesta_texto:t});var o=N({},n,{preguntas:s});a({type:j,payload:o})}},D=function(e){return function(){var t=Object(p.a)(i.a.mark(function t(a,r){var n,s,o,c,u;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=document.querySelector("[name=csrfmiddlewaretoken]").value,s={headers:{"X-CSRFToken":n}},o=r().encuestaReducers.encuesta,c=[],o.preguntas.forEach(function(e){e.respuestas.length>0?e.respuestas.forEach(function(t){c.push({id_pregunta:e.id,id_opcion:t.id,texto_respuesta:e.respuesta_texto,relacion_pregunta:e.dependencia||0})}):c.push({id_pregunta:e.id,id_opcion:0,texto_respuesta:e.respuesta_texto,relacion_pregunta:e.dependencia||0})}),u={id_encuesta:o.slug,respuestas:c,datos_encuestado:e},t.prev=6,t.next=9,b.a.post("https://www.mktestudios.com/api/v1/respuestas/",u,s);case 9:a({type:y,payload:"El formulario ha sido guardado correctamente muchas gracias."}),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(6),console.log(t.t0);case 15:case"end":return t.stop()}},t,null,[[6,12]])}));return function(e,a){return t.apply(this,arguments)}}()},R=function(){return function(e,t){var a=t().encuestaReducers.encuesta,r=a.preguntas.map(function(e){return N({},e,{respuestas:[]})}),n=N({},a,{preguntas:r});e({type:j,payload:n})}},A=function(){return function(e){e({type:O})}},q=(a(71),function(){return s.a.createElement("div",{className:"loader"},s.a.createElement("div",{className:"lds-ellipsis"},s.a.createElement("div",null),s.a.createElement("div",null),s.a.createElement("div",null),s.a.createElement("div",null)))}),P=function(e){function t(){var e,a;Object(m.a)(this,t);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(a=Object(h.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(n)))).state={ciudades:[],errores:{}},a.handleChange=function(e){var t=e.target.id,r=e.target.value;a.setState(Object(l.a)({},t,r))},a.validaDatosEncuestado=function(){var e=a.props.validaDatosEncuestado();Object.keys(e).length?a.setState({errores:e}):a.props.siguiente()},a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=Object(p.a)(i.a.mark(function e(){var t;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.get("https://www.mktestudios.com/api/v1/ciudades/");case 2:t=e.sent,this.setState({ciudades:t.data.results});case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-md-6 form-group"},s.a.createElement("label",{htmlFor:"nombres"},"Nombres"),s.a.createElement("input",{className:"form-control",type:"text",id:"nombres",value:this.props.nombres,onChange:this.props.onChange,required:!0}),this.state.errores.nombres?s.a.createElement("p",{className:"text-muted"},this.state.errores.nombres):""),s.a.createElement("div",{className:"col-md-6 form-group"},s.a.createElement("label",{htmlFor:"apellidos"},"Apellidos"),s.a.createElement("input",{className:"form-control",type:"text",id:"apellidos",value:this.props.apellidos,onChange:this.props.onChange,required:!0}),this.state.errores.apellidos?s.a.createElement("p",{className:"text-muted"},this.state.errores.apellidos):""),s.a.createElement("div",{className:"col-md-6 form-group"},s.a.createElement("label",{htmlFor:"edad"},"Edad"),s.a.createElement("input",{className:"form-control",type:"number",id:"edad",value:this.props.edad,onChange:this.props.onChange,required:!0}),this.state.errores.edad?s.a.createElement("p",{className:"text-muted"},this.state.errores.edad):""),s.a.createElement("div",{className:"col-md-6 form-group"},s.a.createElement("label",{htmlFor:"genero"},"G\xe9nero"),s.a.createElement("select",{className:"form-control",type:"text",id:"genero",value:this.props.genero,onChange:this.props.onChange,required:!0},"escolar-adolescente"!==this.props.slug?s.a.createElement("option",{value:"H"},"HOMBRE"):"",s.a.createElement("option",{value:"M"},"MUJER")),this.state.errores.genero?s.a.createElement("p",{className:"text-muted"},this.state.errores.genero):""),s.a.createElement("div",{className:"col-md-6 form-group"},s.a.createElement("label",{htmlFor:"ciudad"},"Ciudad"),s.a.createElement("select",{className:"form-control",type:"text",id:"ciudad",value:this.props.ciudad,onChange:this.props.onChange,required:!0},s.a.createElement("option",null,"Seleccione uno"),this.state.ciudades.map(function(e){return s.a.createElement("option",{key:e.id,value:e.id},e.nombre)})),this.state.errores.ciudad?s.a.createElement("p",{className:"text-muted"},this.state.errores.ciudad):""),s.a.createElement("div",{className:"col-md-6 form-group"},s.a.createElement("label",{htmlFor:"email"},"Correo"),s.a.createElement("input",{className:"form-control",type:"email",id:"email",value:this.props.email,onChange:this.props.onChange,required:!0}),this.state.errores.ciudad?s.a.createElement("p",{className:"text-muted"},this.state.errores.ciudad):""),"infantil"===this.props.slug?s.a.createElement("div",{className:"col-md-6 form-check"},s.a.createElement("label",{htmlFor:"tiene_hijos"},"Tiene hijos"),s.a.createElement("select",{className:"form-control",id:"tiene_hijos",value:this.props.tiene_hijos,onChange:this.props.onChange},s.a.createElement("option",{value:""},"Seleccione uno"),s.a.createElement("option",{value:"true"},"SI"),s.a.createElement("option",{value:"false"},"NO")),this.state.errores.tiene_hijos?s.a.createElement("p",{className:"text-muted"},this.state.errores.tiene_hijos):""):"","infantil"===this.props.slug?s.a.createElement("div",{className:"col-md-6 form-group"},s.a.createElement("label",{htmlFor:"edad"},"Edad hijos"),s.a.createElement("input",{className:"form-control",type:"text",id:"edad_hijos",placeholder:"Ejemplo: 12, 2, 3",value:this.props.edad_hijos,onChange:this.props.onChange}),this.state.errores.edad_hijos?s.a.createElement("p",{className:"text-muted"},this.state.errores.edad_hijos):""):"","infantil"===this.props.slug?s.a.createElement("div",{className:"col-md-6 form-group"},s.a.createElement("label",{htmlFor:"genero_hijo"},"G\xe9nero Hijo"),s.a.createElement("select",{className:"form-control",type:"text",id:"genero_hijo",value:this.props.genero_hijo,onChange:this.props.onChange,required:!0},s.a.createElement("option",{value:"H"},"HOMBRE"),s.a.createElement("option",{value:"M"},"MUJER")),this.state.errores.genero_hijo?s.a.createElement("p",{className:"text-muted"},this.state.errores.genero_hijo):""):""),s.a.createElement("div",{className:"text-center"},this.props.mostrarEncuesta?"":s.a.createElement("button",{type:"button",className:"btn btn-primary",onClick:this.validaDatosEncuestado},"Siguiente")))}}]),t}(s.a.Component),F=function(e){return s.a.createElement("div",{className:"mensaje"},s.a.createElement("div",{className:"card"},s.a.createElement("div",{className:"card-body"},s.a.createElement("h4",{className:"card-title"},"Muchas Gracias"),s.a.createElement("p",{className:"card-text"},e.mensaje))))},M=function(e){function t(){var e,a;Object(m.a)(this,t);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(a=Object(h.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(n)))).state={checked:!1},a.handleClick=function(){var e=a.props.encuesta.preguntas[a.props.pregunta];if(a.state.checked){if(1===e.max_respuestas)return a.props.agregar_respuesta_uno(a.props.pregunta,a.props.opcion),void a.setState({checked:!0});a.props.quitar_respuesta(a.props.pregunta,a.props.opcion)}else{if(1===e.max_respuestas)return a.props.agregar_respuesta_uno(a.props.pregunta,a.props.opcion),void a.setState({checked:!0});a.props.agregar_respuesta(a.props.pregunta,a.props.opcion)}a.setState({checked:!a.state.checked})},a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this,t=this.props.opcion,a=this.props.encuesta.preguntas[this.props.pregunta],r=a.respuestas.findIndex(function(t){return t.id===e.props.opcion.id}),n="fa fa-check hidden";return a.max_respuestas,this.state.checked&&r>-1&&(n+="fa fa-check checked-image"),s.a.createElement("div",{className:"col-xs-4 col-sm-3 col-md-3 text-center image-form"},s.a.createElement("button",{type:"button",onClick:this.handleClick,className:"image-check"},s.a.createElement("img",{className:"img-responsive img-op",src:t.imagen,alt:t.imagen}),s.a.createElement("i",{className:n})))}}]),t}(s.a.Component),T=Object(E.b)(function(e){return e.encuestaReducers},r)(M),U=function(e){function t(){var e,a;Object(m.a)(this,t);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(a=Object(h.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(n)))).handleChange=function(e){var t=e.target.checked;1!==a.props.multiple?t?a.props.agregar_respuesta(a.props.pregunta,a.props.opcion):a.props.quitar_respuesta(a.props.pregunta,a.props.opcion):a.props.agregar_respuesta_uno(a.props.pregunta,a.props.opcion)},a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.props.opcion,t="checkbox";return 1===+this.props.multiple&&(t="radio"),s.a.createElement("div",{className:"form-check"},s.a.createElement("input",{className:"form-check-input",type:t,name:this.props.pregunta,id:e.id,value:e.id,onChange:this.handleChange}),s.a.createElement("label",{className:"form-check-label",htmlFor:e.id},e.titulo))}}]),t}(s.a.Component),I=Object(E.b)(null,r)(U),G=function(e){function t(){var e,a;Object(m.a)(this,t);for(var r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];return(a=Object(h.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(o)))).handleMultiples=function(e){if(e.filter(function(e){return null!==e.imagen}).length){var t=e.filter(function(e){return e.genero===a.props.genero});return t.length&&(e=t),s.a.createElement("div",{className:"row"},e.map(function(e,t){return s.a.createElement(T,{key:e.id+a.props.pregunta,opcion:e,pregunta:a.props.pregunta,index:t})}))}var r=a.props.encuesta.preguntas[a.props.pregunta].especifica,o=a.props.encuesta.preguntas[a.props.pregunta].respuestas[0],c=!1;return o&&(c=o.especifica),s.a.createElement(n.Fragment,null,a.props.encuesta.preguntas[a.props.pregunta].expecifica,e.map(function(e){return s.a.createElement(I,{key:e.id,opcion:e,pregunta:a.props.pregunta,multiple:a.props.encuesta.preguntas[a.props.pregunta].max_respuestas})}),r&&c?s.a.createElement("div",{className:"form-group"},s.a.createElement("textarea",{className:"form-control",name:"abierto[]",onChange:function(e){return a.props.agregar_respuesta_texto(a.props.pregunta,e.target.value)}})):"")},a.handleMultiplesDependencia=function(){var e=a.props.encuesta.preguntas[a.props.pregunta].dependencia,t=a.props.encuesta.preguntas.findIndex(function(t){return t.id===e}),r=a.props.encuesta.preguntas[t].respuestas;return s.a.createElement(n.Fragment,null,s.a.createElement("div",{className:"row"},r.map(function(e,t){return s.a.createElement(T,{key:e.id,opcion:e,pregunta:a.props.pregunta,index:t})})),s.a.createElement("br",null),a.props.encuesta.preguntas[a.props.pregunta].especifica?s.a.createElement("div",{className:"form-group"},s.a.createElement("textarea",{className:"form-control",name:"abierto[]",onChange:function(e){return a.props.agregar_respuesta_texto(a.props.pregunta,e.target.value)}})):"")},a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this,t=this.props.pregunta;return this.props.encuesta.preguntas[t].respuestas_multiples?this.handleMultiples(this.props.encuesta.preguntas[t].opciones):this.props.encuesta.preguntas[t].dependencia?this.handleMultiplesDependencia():s.a.createElement("div",{className:"form-group"},s.a.createElement("textarea",{className:"form-control",name:"abierto[]",onChange:function(a){return e.props.agregar_respuesta_texto(t,a.target.value)}}))}}]),t}(s.a.Component),H=Object(E.b)(function(e){return e.encuestaReducers},r)(G),J=function(e){function t(){var e,a;Object(m.a)(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(a=Object(h.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(n)))).state={nombres:"",apellidos:"",edad:"",genero:"M",ciudad:"",email:"",tiene_hijos:!1,edad_hijos:"",genero_hijo:"H"},a.validaDatosEncuestado=function(){var e={};return""===a.state.nombres&&(e.nombres="Nombre es requerido"),""===a.state.apellidos&&(e.apellidos="Apellido es requerido"),0!==a.state.edad&&""!==a.state.edad||(e.edad="Edad es requerida"),""===a.state.ciudad&&(e.ciudad="Ciudad es requerido"),"infantil"===a.props.match.params.slug&&""===a.state.edad_hijos&&!1!==a.state.tiene_hijos&&(e.edad_hijos="La edad de los hijos es requerido"),"infantil"===a.props.match.params.slug&&!1===a.state.tiene_hijos&&0===Object.keys(e).length&&a.props.guardar_datos(a.state),e},a.handleSumit=function(e){e.preventDefault(),a.props.guardar_datos(a.state)},a.handleChangeInput=function(e){var t=e.target.id,r=e.target.value;a.setState(Object(l.a)({},t,r)),"genero_hijo"===t&&a.props.cambiaGenero()},a.mostrarDatosForm=function(){var e="infantil"===a.props.match.params.slug?a.state.genero_hijo:a.state.genero;if(a.props.mostrarEncuesta)return s.a.createElement("div",null,a.props.encuesta.preguntas.map(function(t,r){return s.a.createElement("div",{key:t.id,className:"content-preguntas"},s.a.createElement("h5",null,t.nombre.replace("{genero}","H"===e?"hijo":"hija")),s.a.createElement("p",{className:"text-muted"},t.descripcion),s.a.createElement(H,{pregunta:r,genero:"infantil"===a.props.match.params.slug?a.state.genero_hijo:a.state.genero}))}),s.a.createElement("div",{className:"text-center"},s.a.createElement("button",{type:"submit",className:"btn btn-primary"},"Enviar informaci\xf3n")))},a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=Object(p.a)(i.a.mark(function e(){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.traer_uno(this.props.match.params.slug);case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return console.log(this.props),this.props.cargando?s.a.createElement(q,null):this.props.mensaje?s.a.createElement(F,{mensaje:this.props.mensaje}):s.a.createElement("form",{ref:function(t){return e.form=t},className:"form-encuesta",onSubmit:this.handleSumit},s.a.createElement("h4",{className:"text-center"},this.props.encuesta.nombre),s.a.createElement("br",null),s.a.createElement(P,Object.assign({mostrarEncuesta:this.props.mostrarEncuesta,validaDatosEncuestado:this.validaDatosEncuestado,siguiente:this.props.siguiente,slug:this.props.match.params.slug,onChange:this.handleChangeInput},this.state)),s.a.createElement("br",null),this.mostrarDatosForm())}}]),t}(s.a.Component),B=Object(E.b)(function(e){return e.encuestaReducers},r)(J),L=a(17),X=function(){return s.a.createElement("div",{className:"container"},s.a.createElement(L.a,{exact:!0,path:"/:slug",component:B}))},z=a(19),K=a(42),Q=a(26);a(73);function V(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,r)}return a}function W(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?V(a,!0).forEach(function(t){Object(l.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):V(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var Y={encuesta:{},datos_encuestado:{},cargando:!0,mensaje:"",error:"",mostrarEncuesta:!1},Z=Object(z.c)({encuestaReducers:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case j:return W({},e,{encuesta:t.payload,cargando:!1,error:""});case"CARGANDO_ENCUESTA":return W({},e,{cargando:!0});case"ERROR_ENCUESTA":return W({},e,{cargando:!1,error:t.payload});case"DATOS_ENCUESTADO":return W({},e,{datos_encuestado:t.payload});case y:return W({},e,{encuesta:{},cargando:!1,mensaje:t.payload});case O:return W({},e,{mostrarEncuesta:!0});default:return e}}}),$=Object(z.d)(Z,{},Object(z.a)(K.a));c.a.render(s.a.createElement(E.a,{store:$},s.a.createElement(Q.a,null,s.a.createElement(X,null))),document.getElementById("root"))}},[[43,1,2]]]);
//# sourceMappingURL=main.45dd470c.chunk.js.map
(window.webpackJsonpfront=window.webpackJsonpfront||[]).push([[0],{43:function(e,t,a){e.exports=a(74)},48:function(e,t,a){},71:function(e,t,a){},74:function(e,t,a){"use strict";a.r(t);var r={};a.r(r),a.d(r,"traer_uno",function(){return k}),a.d(r,"agregar_respuesta",function(){return C}),a.d(r,"agregar_respuesta_uno",function(){return w}),a.d(r,"quitar_respuesta",function(){return S}),a.d(r,"agregar_respuesta_texto",function(){return D}),a.d(r,"guardar_datos",function(){return R}),a.d(r,"cambiaGenero",function(){return A}),a.d(r,"siguiente",function(){return q});var n=a(0),s=a.n(n),o=a(22),c=a.n(o),u=(a(48),a(8)),p=a.n(u),i=a(18),l=a(16),d=a(9),m=a(10),h=a(14),g=a(11),f=a(13),v=a(12),E=a(21),b=a.n(E),j="ERROR_ENCUESTA",y="TRAER_UNO_ENCUESTA",_="GUARDADO_ENCUESTA",O="SIGUIENTE_ENCUESTA";function N(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,r)}return a}function x(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?N(a,!0).forEach(function(t){Object(l.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):N(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var k=function(e){return function(){var t=Object(i.a)(p.a.mark(function t(a){var r,n,s,o;return p.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,b.a.get("https://www.mktestudios.com/api/v1/encuestas/".concat(e,"/"));case 3:r=t.sent,n=r.data,s=n.preguntas.map(function(e){return x({},e,{respuestas:[],respuesta_texto:""})}),o=x({},n,{preguntas:s}),a({type:y,payload:o}),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),console.log(t.t0);case 13:case"end":return t.stop()}},t,null,[[0,10]])}));return function(e){return t.apply(this,arguments)}}()},C=function(e,t){return function(a,r){var n=r().encuestaReducers.encuesta,s=n.preguntas;s[e]=x({},s[e],{respuestas:s[e].respuestas.concat(t)});var o=x({},n,{preguntas:s});a({type:y,payload:o})}},w=function(e,t){return function(a,r){var n=r().encuestaReducers.encuesta,s=n.preguntas;s[e]=x({},s[e],{respuestas:[t]});var o=x({},n,{preguntas:s});a({type:y,payload:o}),t.titulo&&"NO"===t.titulo.toUpperCase()&&a({type:"GUARDAR_DATOS"})}},S=function(e,t){return function(a,r){var n=r().encuestaReducers.encuesta,s=n.preguntas,o=s[e].respuestas,c=o.findIndex(function(e){return e.id===t.id});o.splice(c,1),s[e]=x({},s[e],{respuestas:o});var u=x({},n,{preguntas:s});a({type:y,payload:u})}},D=function(e,t){return function(a,r){var n=r().encuestaReducers.encuesta,s=n.preguntas;s[e]=x({},s[e],{respuesta_texto:t});var o=x({},n,{preguntas:s});a({type:y,payload:o})}},R=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return function(){var a=Object(i.a)(p.a.mark(function a(r,n){var s,o,c,u,i,l;return p.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:s=document.querySelector("[name=csrfmiddlewaretoken]").value,o={headers:{"X-CSRFToken":s}},c=n().encuestaReducers.encuesta,u=[],i={},a.prev=5,c.preguntas.forEach(function(e){if(e.respuestas.length>0)e.respuestas.forEach(function(t){u.push({id_pregunta:e.id,id_opcion:t.id,texto_respuesta:e.respuesta_texto,relacion_pregunta:e.dependencia||0})});else{if(!e.respuestas_multiples&&"valida"==e.tipo_respuesta&&t)throw i;u.push({id_pregunta:e.id,id_opcion:0,texto_respuesta:e.respuesta_texto,relacion_pregunta:e.dependencia||0})}}),a.next=13;break;case 9:return a.prev=9,a.t0=a.catch(5),r({type:j,payload:"Se tiene que llenar todas las preguntas"}),a.abrupt("return");case 13:return l={id_encuesta:c.slug,respuestas:u,datos_encuestado:e},a.prev=14,a.next=17,b.a.post("https://www.mktestudios.com/api/v1/respuestas/",l,o);case 17:r({type:_,payload:"El formulario ha sido guardado correctamente muchas gracias."}),a.next=23;break;case 20:a.prev=20,a.t1=a.catch(14),console.log(a.t1);case 23:case"end":return a.stop()}},a,null,[[5,9],[14,20]])}));return function(e,t){return a.apply(this,arguments)}}()},A=function(){return function(e,t){var a=t().encuestaReducers.encuesta,r=a.preguntas.map(function(e){return x({},e,{respuestas:[]})}),n=x({},a,{preguntas:r});e({type:y,payload:n})}},q=function(){return function(e){e({type:O})}},P=(a(71),function(){return s.a.createElement("div",{className:"loader"},s.a.createElement("div",{className:"lds-ellipsis"},s.a.createElement("div",null),s.a.createElement("div",null),s.a.createElement("div",null),s.a.createElement("div",null)))}),F=function(e){function t(){var e,a;Object(d.a)(this,t);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(a=Object(h.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(n)))).state={ciudades:[],errores:{}},a.handleChange=function(e){var t=e.target.id,r=e.target.value;a.setState(Object(l.a)({},t,r))},a.validaDatosEncuestado=function(){var e=a.props.validaDatosEncuestado();Object.keys(e).length?a.setState({errores:e}):a.props.siguiente()},a}return Object(f.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=Object(i.a)(p.a.mark(function e(){var t;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.get("https://www.mktestudios.com/api/v1/ciudades/");case 2:t=e.sent,this.setState({ciudades:t.data.results});case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-md-6 form-group"},s.a.createElement("label",{htmlFor:"nombres"},"Nombres"),s.a.createElement("input",{className:"form-control",type:"text",id:"nombres",value:this.props.nombres,onChange:this.props.onChange,required:!0}),this.state.errores.nombres?s.a.createElement("p",{className:"text-muted"},this.state.errores.nombres):""),s.a.createElement("div",{className:"col-md-6 form-group"},s.a.createElement("label",{htmlFor:"apellidos"},"Apellidos"),s.a.createElement("input",{className:"form-control",type:"text",id:"apellidos",value:this.props.apellidos,onChange:this.props.onChange,required:!0}),this.state.errores.apellidos?s.a.createElement("p",{className:"text-muted"},this.state.errores.apellidos):""),s.a.createElement("div",{className:"col-md-6 form-group"},s.a.createElement("label",{htmlFor:"edad"},"Edad"),s.a.createElement("input",{className:"form-control",type:"number",id:"edad",value:this.props.edad,onChange:this.props.onChange,required:!0}),this.state.errores.edad?s.a.createElement("p",{className:"text-muted"},this.state.errores.edad):""),s.a.createElement("div",{className:"col-md-6 form-group"},s.a.createElement("label",{htmlFor:"genero"},"G\xe9nero"),s.a.createElement("select",{className:"form-control",type:"text",id:"genero",value:this.props.genero,onChange:this.props.onChange,required:!0},"escolar-adolescente"!==this.props.slug?s.a.createElement("option",{value:"H"},"HOMBRE"):"",s.a.createElement("option",{value:"M"},"MUJER")),this.state.errores.genero?s.a.createElement("p",{className:"text-muted"},this.state.errores.genero):""),s.a.createElement("div",{className:"col-md-6 form-group"},s.a.createElement("label",{htmlFor:"ciudad"},"Ciudad"),s.a.createElement("select",{className:"form-control",type:"text",id:"ciudad",value:this.props.ciudad,onChange:this.props.onChange,required:!0},s.a.createElement("option",null,"Seleccione uno"),this.state.ciudades.map(function(e){return s.a.createElement("option",{key:e.id,value:e.id},e.nombre)})),this.state.errores.ciudad?s.a.createElement("p",{className:"text-muted"},this.state.errores.ciudad):""),s.a.createElement("div",{className:"col-md-6 form-group"},s.a.createElement("label",{htmlFor:"email"},"Correo"),s.a.createElement("input",{className:"form-control",type:"email",id:"email",value:this.props.email,onChange:this.props.onChange,required:!0}),this.state.errores.ciudad?s.a.createElement("p",{className:"text-muted"},this.state.errores.ciudad):""),"infantil"===this.props.slug?s.a.createElement("div",{className:"col-md-6 form-check"},s.a.createElement("label",{htmlFor:"tiene_hijos"},"Tiene hijos"),s.a.createElement("select",{className:"form-control",id:"tiene_hijos",value:this.props.tiene_hijos,onChange:this.props.onChange},s.a.createElement("option",{value:""},"Seleccione uno"),s.a.createElement("option",{value:"true"},"SI"),s.a.createElement("option",{value:"false"},"NO")),this.state.errores.tiene_hijos?s.a.createElement("p",{className:"text-muted"},this.state.errores.tiene_hijos):""):"","infantil"===this.props.slug?s.a.createElement("div",{className:"col-md-6 form-group"},s.a.createElement("label",{htmlFor:"edad"},"Edad hijos"),s.a.createElement("input",{className:"form-control",type:"text",id:"edad_hijos",placeholder:"Ejemplo: 12, 2, 3",value:this.props.edad_hijos,onChange:this.props.onChange}),this.state.errores.edad_hijos?s.a.createElement("p",{className:"text-muted"},this.state.errores.edad_hijos):""):"","infantil"===this.props.slug?s.a.createElement("div",{className:"col-md-6 form-group"},s.a.createElement("label",{htmlFor:"genero_hijo"},"G\xe9nero Hijo"),s.a.createElement("select",{className:"form-control",type:"text",id:"genero_hijo",value:this.props.genero_hijo,onChange:this.props.onChange,required:!0},s.a.createElement("option",{value:"H"},"HOMBRE"),s.a.createElement("option",{value:"M"},"MUJER")),this.state.errores.genero_hijo?s.a.createElement("p",{className:"text-muted"},this.state.errores.genero_hijo):""):""),s.a.createElement("div",{className:"text-center"},this.props.mostrarEncuesta?"":s.a.createElement("button",{type:"button",className:"btn btn-primary",onClick:this.validaDatosEncuestado},"Siguiente")))}}]),t}(s.a.Component),M=function(e){return s.a.createElement("div",{className:"mensaje"},s.a.createElement("div",{className:"card"},s.a.createElement("div",{className:"card-body"},s.a.createElement("h4",{className:"card-title"},"Muchas Gracias"),s.a.createElement("p",{className:"card-text"},e.mensaje))))},U=function(e){function t(){var e,a;Object(d.a)(this,t);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(a=Object(h.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(n)))).state={checked:!1},a.handleClick=function(){var e=a.props.encuesta.preguntas[a.props.pregunta];if(a.state.checked){if(1===e.max_respuestas)return a.props.agregar_respuesta_uno(a.props.pregunta,a.props.opcion),void a.setState({checked:!0});a.props.quitar_respuesta(a.props.pregunta,a.props.opcion)}else{if(1===e.max_respuestas)return a.props.agregar_respuesta_uno(a.props.pregunta,a.props.opcion),void a.setState({checked:!0});a.props.agregar_respuesta(a.props.pregunta,a.props.opcion)}a.setState({checked:!a.state.checked})},a}return Object(f.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this,t=this.props.opcion,a=this.props.encuesta.preguntas[this.props.pregunta],r=a.respuestas.findIndex(function(t){return t.id===e.props.opcion.id}),n="fa fa-check hidden";return a.max_respuestas,this.state.checked&&r>-1&&(n+="fa fa-check checked-image"),s.a.createElement("div",{className:"col-xs-12 col-sm-6 col-md-6 text-center image-form"},s.a.createElement("button",{type:"button",onClick:this.handleClick,className:"image-check"},s.a.createElement("img",{className:"img-responsive img-op",src:t.imagen,alt:t.imagen}),s.a.createElement("i",{className:n})))}}]),t}(s.a.Component),T=Object(v.b)(function(e){return e.encuestaReducers},r)(U),G=function(e){function t(){var e,a;Object(d.a)(this,t);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(a=Object(h.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(n)))).handleChange=function(e){var t=e.target.checked;1!==a.props.multiple?t?a.props.agregar_respuesta(a.props.pregunta,a.props.opcion):a.props.quitar_respuesta(a.props.pregunta,a.props.opcion):a.props.agregar_respuesta_uno(a.props.pregunta,a.props.opcion)},a}return Object(f.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.props.opcion,t="checkbox";return 1===+this.props.multiple&&(t="radio"),s.a.createElement("div",{className:"form-check"},s.a.createElement("input",{className:"form-check-input",type:t,name:this.props.pregunta,id:e.id,value:e.id,onChange:this.handleChange,required:!0}),s.a.createElement("label",{className:"form-check-label",htmlFor:e.id},e.titulo))}}]),t}(s.a.Component),I=Object(v.b)(null,r)(G),H=function(e){function t(){var e,a;Object(d.a)(this,t);for(var r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];return(a=Object(h.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(o)))).handleMultiples=function(e){if(e.filter(function(e){return null!==e.imagen}).length){var t=e.filter(function(e){return e.genero===a.props.genero});return t.length&&(e=t),s.a.createElement("div",{className:"row"},e.map(function(e,t){return s.a.createElement(T,{key:e.id+a.props.pregunta,opcion:e,pregunta:a.props.pregunta,index:t})}))}var r=a.props.encuesta.preguntas[a.props.pregunta].especifica,o=a.props.encuesta.preguntas[a.props.pregunta].respuestas[0],c=!1;return o&&(c=o.especifica),s.a.createElement(n.Fragment,null,a.props.encuesta.preguntas[a.props.pregunta].expecifica,e.map(function(e){return s.a.createElement(I,{key:e.id,opcion:e,pregunta:a.props.pregunta,multiple:a.props.encuesta.preguntas[a.props.pregunta].max_respuestas})}),r&&c?s.a.createElement("div",{className:"form-group"},s.a.createElement("textarea",{className:"form-control",name:"abierto[]",onChange:function(e){return a.props.agregar_respuesta_texto(a.props.pregunta,e.target.value)},required:!0})):"")},a.handleMultiplesDependencia=function(){var e=a.props.encuesta.preguntas[a.props.pregunta].dependencia,t=a.props.encuesta.preguntas.findIndex(function(t){return t.id===e}),r=a.props.encuesta.preguntas[t].respuestas;return s.a.createElement(n.Fragment,null,s.a.createElement("div",{className:"row"},r.map(function(e,t){return s.a.createElement(T,{key:e.id,opcion:e,pregunta:a.props.pregunta,index:t})})),s.a.createElement("br",null),a.props.encuesta.preguntas[a.props.pregunta].especifica?s.a.createElement("div",{className:"form-group"},s.a.createElement("textarea",{className:"form-control",name:"abierto[]",onChange:function(e){return a.props.agregar_respuesta_texto(a.props.pregunta,e.target.value)},required:!0})):"")},a}return Object(f.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this,t=this.props.pregunta;return this.props.encuesta.preguntas[t].respuestas_multiples?this.handleMultiples(this.props.encuesta.preguntas[t].opciones):this.props.encuesta.preguntas[t].dependencia?this.handleMultiplesDependencia():s.a.createElement("div",{className:"form-group"},s.a.createElement("textarea",{className:"form-control",name:"abierto[]",onChange:function(a){return e.props.agregar_respuesta_texto(t,a.target.value)},required:!0}))}}]),t}(s.a.Component),J=Object(v.b)(function(e){return e.encuestaReducers},r)(H),B=function(e){function t(){var e,a;Object(d.a)(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(a=Object(h.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(n)))).state={nombres:"",apellidos:"",edad:"",genero:"M",ciudad:"",email:"",tiene_hijos:!1,edad_hijos:"",genero_hijo:"H"},a.validaDatosEncuestado=function(){var e={};return""===a.state.nombres&&(e.nombres="Nombre es requerido"),""===a.state.apellidos&&(e.apellidos="Apellido es requerido"),0!==a.state.edad&&""!==a.state.edad||(e.edad="Edad es requerida"),""===a.state.ciudad&&(e.ciudad="Ciudad es requerido"),"infantil"===a.props.match.params.slug&&""===a.state.edad_hijos&&!1!==a.state.tiene_hijos&&(e.edad_hijos="La edad de los hijos es requerido"),"infantil"===a.props.match.params.slug&&!1===a.state.tiene_hijos&&0===Object.keys(e).length&&a.props.guardar_datos(a.state,!1),e},a.handleSumit=function(e){e.preventDefault(),a.props.guardar_datos(a.state)},a.handleChangeInput=function(e){var t=e.target.id,r=e.target.value;a.setState(Object(l.a)({},t,r)),"genero_hijo"===t&&a.props.cambiaGenero()},a.mostrarDatosForm=function(){var e="infantil"===a.props.match.params.slug?a.state.genero_hijo:a.state.genero;if(a.props.mostrarEncuesta)return a.props.guardar_datos_valida&&a.props.guardar_datos(a.state,!1),s.a.createElement("div",null,a.props.encuesta.preguntas.map(function(t,r){return s.a.createElement("div",{key:t.id,className:"content-preguntas"},s.a.createElement("h5",null,t.nombre.replace("{genero}","H"===e?"hijo":"hija")),s.a.createElement("p",{className:"text-muted"},t.descripcion),s.a.createElement(J,{pregunta:r,genero:"infantil"===a.props.match.params.slug?a.state.genero_hijo:a.state.genero}))}),s.a.createElement("div",{className:"text-center"},s.a.createElement("button",{type:"submit",className:"btn btn-primary"},"Enviar informaci\xf3n"),s.a.createElement("br",null),s.a.createElement("br",null),a.props.error?s.a.createElement("div",{className:"alert alert-danger",role:"alert"},a.props.error):""))},a}return Object(f.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=Object(i.a)(p.a.mark(function e(){return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.traer_uno(this.props.match.params.slug);case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return this.props.cargando?s.a.createElement(P,null):this.props.mensaje?s.a.createElement(M,{mensaje:this.props.mensaje}):(console.log(this.props),s.a.createElement("form",{ref:function(t){return e.form=t},className:"form-encuesta",onSubmit:this.handleSumit},s.a.createElement("h4",{className:"text-center"},this.props.encuesta.nombre),s.a.createElement("br",null),s.a.createElement(F,Object.assign({mostrarEncuesta:this.props.mostrarEncuesta,validaDatosEncuestado:this.validaDatosEncuestado,siguiente:this.props.siguiente,slug:this.props.match.params.slug,onChange:this.handleChangeInput},this.state)),s.a.createElement("br",null),this.mostrarDatosForm()))}}]),t}(s.a.Component),L=Object(v.b)(function(e){return e.encuestaReducers},r)(B),X=a(17),z=function(){return s.a.createElement("div",{className:"container"},s.a.createElement(X.a,{exact:!0,path:"/:slug",component:L}))},K=a(19),Q=a(42),V=a(26);a(73);function W(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,r)}return a}function Y(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?W(a,!0).forEach(function(t){Object(l.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):W(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var Z={encuesta:{},datos_encuestado:{},cargando:!0,mensaje:"",error:"",mostrarEncuesta:!1,guardar_datos_valida:!1},$=Object(K.c)({encuestaReducers:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Z,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case y:return Y({},e,{encuesta:t.payload,cargando:!1,error:""});case"CARGANDO_ENCUESTA":return Y({},e,{cargando:!0});case j:return Y({},e,{cargando:!1,error:t.payload});case"DATOS_ENCUESTADO":return Y({},e,{datos_encuestado:t.payload});case _:return Y({},e,{encuesta:{},cargando:!1,mensaje:t.payload});case O:return Y({},e,{mostrarEncuesta:!0});case"GUARDAR_DATOS":return Y({},e,{guardar_datos_valida:!0});default:return e}}}),ee=Object(K.d)($,{},Object(K.a)(Q.a));c.a.render(s.a.createElement(v.a,{store:ee},s.a.createElement(V.a,null,s.a.createElement(z,null))),document.getElementById("root"))}},[[43,1,2]]]);
//# sourceMappingURL=main.72c39f61.chunk.js.map